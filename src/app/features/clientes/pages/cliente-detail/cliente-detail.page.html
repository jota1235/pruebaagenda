<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon slot="icon-only" name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Detalle del Cliente</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="editCliente()">
        <ion-icon slot="icon-only" name="create-outline"></ion-icon>
      </ion-button>
      <ion-button (click)="deleteCliente()" color="danger">
        <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Loading -->
  <div class="loading-container" *ngIf="isLoading">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Cargando información...</p>
  </div>

  <!-- Contenido del cliente -->
  <div class="cliente-detail" *ngIf="!isLoading && cliente">
    <!-- Header con avatar -->
    <div class="cliente-header">
      <ion-avatar [style.background]="getAvatarColor()">
        <div class="avatar-initials">{{ getInitials() }}</div>
      </ion-avatar>
      <h1 class="cliente-name">{{ getFullName() }}</h1>
      <ion-badge color="success" *ngIf="cliente.activo">Activo</ion-badge>
    </div>

    <!-- Información de contacto -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="person-outline"></ion-icon>
          Información de Contacto
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item button (click)="callPhone()" [disabled]="!cliente.telefono">
            <ion-icon name="call-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3>Teléfono</h3>
              <p>{{ cliente.telefono || 'No especificado' }}</p>
            </ion-label>
          </ion-item>

          <ion-item button (click)="sendEmail()" [disabled]="!cliente.email">
            <ion-icon name="mail-outline" slot="start" color="primary"></ion-icon>
            <ion-label>
              <h3>Email</h3>
              <p>{{ cliente.email || 'No especificado' }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Información personal -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="document-text-outline"></ion-icon>
          Información Personal
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-list>
          <ion-item>
            <ion-icon name="calendar-outline" slot="start" color="secondary"></ion-icon>
            <ion-label>
              <h3>Fecha de Nacimiento</h3>
              <p>{{ formatDate(cliente.fecha_nacimiento || '') }}</p>
              <ion-note *ngIf="cliente.fecha_nacimiento">
                {{ calculateAge(cliente.fecha_nacimiento) }} años
              </ion-note>
            </ion-label>
          </ion-item>

          <ion-item>
            <ion-icon name="transgender-outline" slot="start" color="secondary"></ion-icon>
            <ion-label>
              <h3>Género</h3>
              <p>{{ cliente.genero || 'No especificado' }}</p>
            </ion-label>
          </ion-item>

          <ion-item>
            <ion-icon name="time-outline" slot="start" color="secondary"></ion-icon>
            <ion-label>
              <h3>Cliente desde</h3>
              <p>{{ formatDate(cliente.fecha_creacion) }}</p>
            </ion-label>
          </ion-item>
        </ion-list>
      </ion-card-content>
    </ion-card>

    <!-- Notas -->
    <ion-card *ngIf="cliente.notas">
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="document-text-outline"></ion-icon>
          Notas
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p class="notas-content">{{ cliente.notas }}</p>
      </ion-card-content>
    </ion-card>

    <!-- Acciones rápidas -->
    <div class="quick-actions">
      <ion-button expand="block" (click)="editCliente()">
        <ion-icon slot="start" name="create-outline"></ion-icon>
        Editar Cliente
      </ion-button>
    </div>
  </div>
</ion-content>
